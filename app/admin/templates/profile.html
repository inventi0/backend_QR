{% extends "base.html" %}
{% block title %}Профиль{% endblock %}
{% block content %}
<div class="card">
  <h2>Информация о пользователе</h2>
  <div id="info" class="panel">Загрузка…</div>
</div>
{% endblock %}
{% block scripts %}
<script>
(async ()=>{
  const me = await authFetch("/users/me");
  if(!me.ok){ clearToken(); return location.replace("/admin/login"); }
  const u = await me.json();
  const html = `
    <div class="kv"><span>Email</span><b>${u.email}</b></div>
    <div class="kv"><span>Username</span><b>${u.username ?? "-"}</b></div>
    <div class="kv"><span>Superuser</span><b>${u.is_superuser ? "да" : "нет"}</b></div>
    <div class="kv"><span>Active</span><b>${u.is_active ? "да" : "нет"}</b></div>
    <div class="kv"><span>Verified</span><b>${u.is_verified ? "да" : "нет"}</b></div>
    <div class="kv"><span>Role ID</span><b>${u.role_id ?? "-"}</b></div>
  `;
  document.getElementById("info").innerHTML = html;
})();
</script>
{% endblock %}
